



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Python spell checker.">
      
      
        <link rel="canonical" href="https://facelessuser.github.io/pyspelling/api/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.1.0">
    
    
      
        <title>Plugin API - PySpelling</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.11e41852.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
      <script src="../assets/javascripts/modernizr.20ef595d.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../extra-83f68d2c59.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#plugin-api" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://facelessuser.github.io/pyspelling" title="PySpelling" class="md-header-nav__button md-logo">
          
            <i class="md-icon">description</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                PySpelling
              </span>
              <span class="md-header-nav__topic">
                Plugin API
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/facelessuser/pyspelling/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    <li class="md-tabs__item">
      
        <a href=".." title="Usage" class="md-tabs__link md-tabs__link--active">
          Usage
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../filters/context/" title="Filters" class="md-tabs__link">
          Filters
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../flow_control/wildcard/" title="Flow Control" class="md-tabs__link">
          Flow Control
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../about/contributing/" title="About" class="md-tabs__link">
          About
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://facelessuser.github.io/pyspelling" title="PySpelling" class="md-nav__button md-logo">
      
        <i class="md-icon">description</i>
      
    </a>
    PySpelling
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/facelessuser/pyspelling/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1" checked>
    
    <label class="md-nav__link" for="nav-1">
      Usage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Usage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href=".." title="Basic Usage" class="md-nav__link">
      Basic Usage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pipeline/" title="Spelling Pipeline" class="md-nav__link">
      Spelling Pipeline
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Plugin API
      </label>
    
    <a href="./" title="Plugin API" class="md-nav__link md-nav__link--active">
      Plugin API
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#filters" title="Filters" class="md-nav__link">
    Filters
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#filter" title="Filter" class="md-nav__link">
    Filter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filterget_default_config" title="Filter.get_default_config" class="md-nav__link">
    Filter.get_default_config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filtervalidate_options" title="Filter.validate_options" class="md-nav__link">
    Filter.validate_options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filtersetup" title="Filter.setup" class="md-nav__link">
    Filter.setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filterreset" title="Filter.reset" class="md-nav__link">
    Filter.reset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filterhas_bom" title="Filter.has_bom" class="md-nav__link">
    Filter.has_bom
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filterheader_check" title="Filter.header_check" class="md-nav__link">
    Filter.header_check
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filtercontent_check" title="Filter.content_check" class="md-nav__link">
    Filter.content_check
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filterfilter" title="Filter.filter" class="md-nav__link">
    Filter.filter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filtersfilter" title="Filter.sfilter" class="md-nav__link">
    Filter.sfilter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_plugin" title="get_plugin" class="md-nav__link">
    get_plugin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sourcetext" title="SourceText" class="md-nav__link">
    SourceText
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flow-control" title="Flow Control" class="md-nav__link">
    Flow Control
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flowcontrol" title="FlowControl" class="md-nav__link">
    FlowControl
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flowcontrolget_default_config" title="FlowControl.get_default_config" class="md-nav__link">
    FlowControl.get_default_config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flowcontrolvalidate_options" title="FlowControl.validate_options" class="md-nav__link">
    FlowControl.validate_options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flowcontrolsetup" title="FlowControl.setup" class="md-nav__link">
    FlowControl.setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flowcontrolreset" title="FlowControl.reset" class="md-nav__link">
    FlowControl.reset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flowcontroladjust_flow" title="FlowControl.adjust_flow" class="md-nav__link">
    FlowControl.adjust_flow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_plugin_1" title="get_plugin" class="md-nav__link">
    get_plugin
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Filters
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Filters
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../filters/context/" title="Context" class="md-nav__link">
      Context
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../filters/cpp/" title="CPP" class="md-nav__link">
      CPP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../filters/html/" title="HTML" class="md-nav__link">
      HTML
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../filters/javascript/" title="JavaScript" class="md-nav__link">
      JavaScript
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../filters/markdown/" title="Markdown" class="md-nav__link">
      Markdown
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../filters/odf/" title="ODF" class="md-nav__link">
      ODF
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../filters/ooxml/" title="OOXML" class="md-nav__link">
      OOXML
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../filters/python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../filters/stylesheets/" title="Stylesheets" class="md-nav__link">
      Stylesheets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../filters/text/" title="Text" class="md-nav__link">
      Text
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../filters/url/" title="URL" class="md-nav__link">
      URL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../filters/xml/" title="XML" class="md-nav__link">
      XML
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Flow Control
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Flow Control
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../flow_control/wildcard/" title="Wildcard" class="md-nav__link">
      Wildcard
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../about/contributing/" title="Contributing &amp; Support" class="md-nav__link">
      Contributing &amp; Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../about/development/" title="Development" class="md-nav__link">
      Development
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../about/changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../about/license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#filters" title="Filters" class="md-nav__link">
    Filters
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#filter" title="Filter" class="md-nav__link">
    Filter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filterget_default_config" title="Filter.get_default_config" class="md-nav__link">
    Filter.get_default_config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filtervalidate_options" title="Filter.validate_options" class="md-nav__link">
    Filter.validate_options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filtersetup" title="Filter.setup" class="md-nav__link">
    Filter.setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filterreset" title="Filter.reset" class="md-nav__link">
    Filter.reset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filterhas_bom" title="Filter.has_bom" class="md-nav__link">
    Filter.has_bom
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filterheader_check" title="Filter.header_check" class="md-nav__link">
    Filter.header_check
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filtercontent_check" title="Filter.content_check" class="md-nav__link">
    Filter.content_check
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filterfilter" title="Filter.filter" class="md-nav__link">
    Filter.filter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filtersfilter" title="Filter.sfilter" class="md-nav__link">
    Filter.sfilter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_plugin" title="get_plugin" class="md-nav__link">
    get_plugin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sourcetext" title="SourceText" class="md-nav__link">
    SourceText
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flow-control" title="Flow Control" class="md-nav__link">
    Flow Control
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flowcontrol" title="FlowControl" class="md-nav__link">
    FlowControl
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flowcontrolget_default_config" title="FlowControl.get_default_config" class="md-nav__link">
    FlowControl.get_default_config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flowcontrolvalidate_options" title="FlowControl.validate_options" class="md-nav__link">
    FlowControl.validate_options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flowcontrolsetup" title="FlowControl.setup" class="md-nav__link">
    FlowControl.setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flowcontrolreset" title="FlowControl.reset" class="md-nav__link">
    FlowControl.reset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flowcontroladjust_flow" title="FlowControl.adjust_flow" class="md-nav__link">
    FlowControl.adjust_flow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_plugin_1" title="get_plugin" class="md-nav__link">
    get_plugin
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/facelessuser/pyspelling/tree/master/docs/src/markdown/api.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="plugin-api">Plugin API<a class="headerlink" href="#plugin-api" title="Permanent link"></a></h1>
<h2 id="filters">Filters<a class="headerlink" href="#filters" title="Permanent link"></a></h2>
<p>When writing a <code>Filter</code> plugin, there are two classes to be aware: <code>Filter</code> and <code>SourceText</code>. Both classes are found in <code>pyspelling.filters</code>.</p>
<p>Each chunk returned by a filter is a <code>SourceText</code> object. These objects contain the desired, filtered text from the previous filter along with some metadata: encoding, display context, and a category that describes what kind of text the data is. After all filters have processed the text, each <code>SourceText</code>'s content is finally passed to the spell checker.</p>
<p>The text data in a <code>SourceText</code> object is always Unicode, but during the filtering process, the filter can decode the Unicode if required as long as it is returned as Unicode at the end of the step.</p>
<h3 id="filter"><code>Filter</code><a class="headerlink" href="#filter" title="Permanent link"></a></h3>
<p><code>Filter</code> plugins are subclassed from the <code>Filter</code> class.  You'll often want to specify the defaulted value for <code>default_encoding</code> in the <code>__init__</code>. Simply give it a default value as shown below.</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">..</span> <span class="k">import</span> <span class="n">filters</span>


<span class="k">class</span> <span class="nc">MyFilter</span><span class="p">(</span><span class="n">filters</span><span class="o">.</span><span class="n">Filter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Spelling Filter.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">default_encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.&quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="n">default_encoding</span><span class="p">)</span>
</pre></div>

<h3 id="filterget_default_config"><code>Filter.get_default_config</code><a class="headerlink" href="#filterget_default_config" title="Permanent link"></a></h3>
<p><code>get_default_config</code> is where you should specify your default configuration file. This should contain all accepted options and their default value. All user options that are passed in will override the defaults. If an option is passed in that is not found in the defaults, an error will be raised.</p>
<div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_default_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get default configuration.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;enable_something&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;list_of_stuff&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;some&#39;</span><span class="p">,</span> <span class="s1">&#39;stuff&#39;</span><span class="p">]</span>
        <span class="p">}</span>
</pre></div>

<div class="admonition new">
<p class="admonition-title">New 2.0</p>
<p><code>get_default_confg</code> was added in version <code>2.0</code>.</p>
</div>
<h3 id="filtervalidate_options"><code>Filter.validate_options</code><a class="headerlink" href="#filtervalidate_options" title="Permanent link"></a></h3>
<p><code>validate_options</code> is where you can specify validation of your options. By default, basic validation is done on incoming options. For instance, if you specify a default as a <code>bool</code>, the default validator will ensure the passed user options match. Checking is performed on <code>bool</code>, <code>str</code>, <code>list</code>, <code>dict</code>, <code>int</code>, and <code>float</code> types. Nothing beyond simple type checking is performed, so if you had some custom validation, or simply wanted to bypass the default validator with your own, you should override <code>validate_options</code>.</p>
<div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">validate_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Validate options.&quot;&quot;&quot;</span>

        <span class="c1"># Call the basic validator</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">validate_options</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>

        <span class="c1"># Perform custom validation</span>
        <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s2">&quot;foo&quot;</span> <span class="ow">and</span> <span class="n">v</span> <span class="o">!=</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Value should be &#39;bar&#39; for &#39;foo&#39;&quot;</span><span class="p">)</span>
</pre></div>

<div class="admonition new">
<p class="admonition-title">New 2.0</p>
<p><code>validate_options</code> was added in version <code>2.0</code>.</p>
</div>
<h3 id="filtersetup"><code>Filter.setup</code><a class="headerlink" href="#filtersetup" title="Permanent link"></a></h3>
<p><code>setup</code> is were basic setup can be performed post-validation. At this point, you can access the merged and validated configuration via <code>self.config</code>.</p>
<div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Setup.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">enable_foo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span>
</pre></div>

<div class="admonition new">
<p class="admonition-title">New 2.0</p>
<p><code>setup</code> was added in version <code>2.0</code>.</p>
</div>
<h3 id="filterreset"><code>Filter.reset</code><a class="headerlink" href="#filterreset" title="Permanent link"></a></h3>
<p><code>reset</code> is called on every new call to the plugin. It allows you to clean up states from previous calls.</p>
<div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reset&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tracked_stuff</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>

<div class="admonition new">
<p class="admonition-title">New 2.0</p>
<p><code>reset</code> was added in version <code>2.0</code>.</p>
</div>
<h3 id="filterhas_bom"><code>Filter.has_bom</code><a class="headerlink" href="#filterhas_bom" title="Permanent link"></a></h3>
<p><code>has_bom</code> takes a file stream and is usually used to check the first few bytes. While BOM checking could be performed in <code>header_check</code>, this mainly provided as <code>UTF</code> BOMs are quite common in many file types, so a specific test was dedicated to it. Additionally, this replaces the old, less flexible <code>CHECK_BOM</code> attribute that was deprecated in version <code>1.2</code>.</p>
<p>This is useful if you want to handle binary parsing, or a file type that has a custom BOM in the header. When returning encoding in any of the encoding check functions, <code>None</code> means no encoding was detecting, an empty string means binary data (encoding validation is skipped), and anything else will be validated and passed through. Just be sure to include a sensible encoding in your <code>SourceText</code> object when your plugin returns file content.</p>
<div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">has_bom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if has BOM.&quot;&quot;&quot;</span>

        <span class="n">content</span> <span class="o">=</span> <span class="n">filestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">content</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;PK</span><span class="se">\x03\x04</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="c1"># Zip file found.</span>
            <span class="c1"># Return `BINARY_ENCODE` as content is binary type,</span>
            <span class="c1"># but don&#39;t return None which means we don&#39;t know what we have.</span>
            <span class="k">return</span> <span class="n">filters</span><span class="o">.</span><span class="n">BINARY_ENCODE</span>
        <span class="c1"># Not a zip file, so pass it on to the normal file checker.</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">has_bom</span><span class="p">(</span><span class="n">filestream</span><span class="p">)</span>
</pre></div>

<div class="admonition new">
<p class="admonition-title">New 2.0</p>
<p><code>has_bom</code> was added in version <code>2.0</code>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Deprecation 2.0</p>
<p><code>CHECK_BOM</code> has been deprecated since <code>2.0</code>.</p>
</div>
<h3 id="filterheader_check"><code>Filter.header_check</code><a class="headerlink" href="#filterheader_check" title="Permanent link"></a></h3>
<p><code>header_check</code> is a function that receives the first 1024 characters of the file via <code>content</code> that can be scanned for an encoding header. A string with the encoding name should be returned or <code>None</code> if a valid encoding header cannot be found.</p>
<div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">header_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Special encode check.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="kc">None</span>
</pre></div>

<h3 id="filtercontent_check"><code>Filter.content_check</code><a class="headerlink" href="#filtercontent_check" title="Permanent link"></a></h3>
<p><code>content_check</code> receives a file object which allows you to check the entire file buffer to determine encoding. A string with the encoding name should be returned or <code>None</code> if a valid encoding header cannot be found.</p>
<div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">content_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;File content check.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="kc">None</span>
</pre></div>

<h3 id="filterfilter"><code>Filter.filter</code><a class="headerlink" href="#filterfilter" title="Permanent link"></a></h3>
<p><code>filter</code> is called when the <code>Filter</code> object is the first in the chain. This means the file has not been read from disk yet, so we must handle opening the file before applying the filter and then return a list of <code>SourceText</code> objects. The first filter in the chain is handled differently in order to give the opportunity to handle files that require more complex methods to acquire the Unicode strings. You can read the file in binary format or directly to Unicode.  You can run parsers or anything else you need in order to get the required Unicode text for the <code>SourceText</code> objects. You can create as many <code>SourceText</code> objects as you desired and assign them categories so that other <code>Filter</code> objects can avoid them if desired. Below is the default which reads the entire file into a single object providing the file name as the context, the encoding, and the category <code>text</code>.</p>
<div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_file</span><span class="p">,</span> <span class="n">encoding</span><span class="p">):</span>  <span class="c1"># noqa A001</span>
        <span class="sd">&quot;&quot;&quot;Open and filter the file from disk.&quot;&quot;&quot;</span>

        <span class="k">with</span> <span class="n">codecs</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">source_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">SourceText</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">source_file</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">)]</span>
</pre></div>

<h3 id="filtersfilter"><code>Filter.sfilter</code><a class="headerlink" href="#filtersfilter" title="Permanent link"></a></h3>
<p><code>sfilter</code> is called for all <code>Filter</code> objects following the first.  The function is passed a <code>SourceText</code> object from which the text, context, encoding can all be extracted. Here you can manipulate the text back to bytes if needed, wrap the text in an <code>io.StreamIO</code> object to act as a file stream, run parsers, or anything you need to manipulate the buffer to filter the Unicode text for the <code>SourceText</code> objects.</p>
<div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">sfilter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Execute filter.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">[</span><span class="n">SourceText</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">source</span><span class="o">.</span><span class="n">context</span><span class="p">,</span> <span class="n">source</span><span class="o">.</span><span class="n">encoding</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">)]</span>
</pre></div>

<p>If a filter only works either as the first in the chain, or only as a secondary filter in the chain, you could raise an exception if needed.  In most cases, you should be able to have an appropriate <code>filter</code> and <code>sfilter</code>, but there are most likely cases (particular when dealing with binary data) where only a <code>filter</code> method could be provided.</p>
<p>Check out the default filter plugins provided with the source to see real world examples.</p>
<h3 id="get_plugin"><code>get_plugin</code><a class="headerlink" href="#get_plugin" title="Permanent link"></a></h3>
<p>And don't forget to provide a function in the file called <code>get_plugin</code>! <code>get_plugin</code> is the entry point and should return your <code>Filter</code> object.</p>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_plugin</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Return the filter.&quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">HtmlFilter</span>
</pre></div>

<h3 id="sourcetext"><code>SourceText</code><a class="headerlink" href="#sourcetext" title="Permanent link"></a></h3>
<p>As previously mentioned, filters must return a list of <code>SourceText</code> objects.</p>
<div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">SourceText</span><span class="p">(</span><span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;SourceText&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="s1">&#39;context&#39;</span><span class="p">,</span> <span class="s1">&#39;encoding&#39;</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">])):</span>
    <span class="sd">&quot;&quot;&quot;Source text.&quot;&quot;&quot;</span>
</pre></div>

<p>Each object should contain a Unicode string (<code>text</code>), some context on the given text hunk (<code>context</code>), the encoding which the Unicode text was originally in (<code>encoding</code>), and a <code>category</code> that is used to omit certain hunks from other filters in the chain (<code>category</code>). <code>SourceText</code> should not contain byte strings, and if they do, they will not be passed to additional filters. <code>error</code> is optional and is only provided message when something goes wrong.</p>
<p>When receiving a <code>SourceText</code> object in your plugin, you can access the the content via attributes with the same name as the parameters above:</p>
<div class="codehilite"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">source</span><span class="o">.</span><span class="n">text</span>
<span class="go">&#39;Some Text&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source</span><span class="o">.</span><span class="n">context</span>
<span class="go">&#39;foo.txt&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source</span><span class="o">.</span><span class="n">encoding</span>
<span class="go">&#39;utf-8&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source</span><span class="o">.</span><span class="n">category</span>
<span class="go">&#39;some-category&#39;</span>
</pre></div>

<p>Be mindful when adjusting the context in subsequent items in the pipeline chain. Generally you should only append additional context so as not to wipe out previous contextual data. It may not always make sense to append additional data, so some filters might just pass the previous context as the new context.</p>
<p>If you have a particular chunk of text that has a problem, you can return an error in the <code>SourceText</code> object.  Errors really only need a context and the error as they won't be passed to the spell checker or to any subsequent steps in the pipeline. Errors are only used to alert the user that something went wrong. <code>SourceText</code> objects with errors will not be passed down the chain and will not be passed to the spell checker.</p>
<div class="codehilite"><pre><span></span><span class="k">if</span> <span class="n">error</span><span class="p">:</span>
    <span class="n">content</span> <span class="o">=</span> <span class="p">[</span><span class="n">SourceText</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">source_file</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">error</span><span class="p">)]</span>
</pre></div>

<h2 id="flow-control">Flow Control<a class="headerlink" href="#flow-control" title="Permanent link"></a></h2>
<p><code>FlowControl</code> plugins are simple plugins that take the category from a <code>SourceText</code> object, and simply returns either the directive <code>HALT</code>, <code>SKIP</code>, or <code>ALLOW</code>. This controls whether the associated <code>SourceText</code> object's progress is halted in the pipeline, skips the next filter, or is explicitly allowed in the next filter. The directives and <code>FlowControl</code> class are found in <code>pyspelling.flow_control</code>.</p>
<h3 id="flowcontrol"><code>FlowControl</code><a class="headerlink" href="#flowcontrol" title="Permanent link"></a></h3>
<p><code>FlowControl</code> plugins should be subclassed from <code>FlowControl</code>. If you need to you can override the <code>__init__</code>, but remember to call the original with <code>super</code> to ensure options are handled.</p>
<div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">MyFlowControl</span><span class="p">(</span><span class="n">flow_control</span><span class="o">.</span><span class="n">FlowControl</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Flow control plugin.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.&quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</pre></div>

<h3 id="flowcontrolget_default_config"><code>FlowControl.get_default_config</code><a class="headerlink" href="#flowcontrolget_default_config" title="Permanent link"></a></h3>
<p><code>get_default_config</code> is where you should specify your default configuration file. This should contain all accepted options and their default value. All user options that are passed in will override the defaults. If an option is passed in that is not found in the defaults, an error will be raised.</p>
<div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_default_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get default configuration.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;enable_something&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;list_of_stuff&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;some&#39;</span><span class="p">,</span> <span class="s1">&#39;stuff&#39;</span><span class="p">]</span>
        <span class="p">}</span>
</pre></div>

<div class="admonition new">
<p class="admonition-title">New 2.0</p>
<p><code>get_default_confg</code> was added in version <code>2.0</code>.</p>
</div>
<h3 id="flowcontrolvalidate_options"><code>FlowControl.validate_options</code><a class="headerlink" href="#flowcontrolvalidate_options" title="Permanent link"></a></h3>
<p><code>validate_options</code> is where you can specify validation of your options. By default, basic validation is done on incoming options. For instance, if you specify a default as a <code>bool</code>, the default validator will ensure the passed user options match. Checking is performed on <code>bool</code>, <code>str</code>, <code>list</code>, <code>dict</code>, <code>int</code>, and <code>float</code> types. Nothing beyond simple type checking is performed, so if you had some custom validation, or simply wanted to bypass the default validator with your own, you should override <code>validate_options</code>.</p>
<div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">validate_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Validate options.&quot;&quot;&quot;</span>

        <span class="c1"># Call the basic validator</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">validate_options</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>

        <span class="c1"># Perform custom validation</span>
        <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s2">&quot;foo&quot;</span> <span class="ow">and</span> <span class="n">v</span> <span class="o">!=</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Value should be &#39;bar&#39; for &#39;foo&#39;&quot;</span><span class="p">)</span>
</pre></div>

<div class="admonition new">
<p class="admonition-title">New 2.0</p>
<p><code>validate_options</code> was added in version <code>2.0</code>.</p>
</div>
<h3 id="flowcontrolsetup"><code>FlowControl.setup</code><a class="headerlink" href="#flowcontrolsetup" title="Permanent link"></a></h3>
<p><code>setup</code> is were basic setup can be performed post-validation. At this point, you can access the merged and validated configuration via <code>self.config</code>.</p>
<div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Setup.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">enable_foo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span>
</pre></div>

<div class="admonition new">
<p class="admonition-title">New 2.0</p>
<p><code>setup</code> was added in version <code>2.0</code>.</p>
</div>
<h3 id="flowcontrolreset"><code>FlowControl.reset</code><a class="headerlink" href="#flowcontrolreset" title="Permanent link"></a></h3>
<p><code>reset</code> is called on every new call to the plugin. It allows you to clean up states from previous calls.</p>
<div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reset&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tracked_stuff</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>

<div class="admonition new">
<p class="admonition-title">New 2.0</p>
<p><code>reset</code> was added in version <code>2.0</code>.</p>
</div>
<h3 id="flowcontroladjust_flow"><code>FlowControl.adjust_flow</code><a class="headerlink" href="#flowcontroladjust_flow" title="Permanent link"></a></h3>
<p>After handling the options, there is only one other function available for overrides: <code>adjust_flow</code>.  Adjust flow receives the category from the <code>SourceText</code> being passed down the pipeline. Here the decision is made to as to what must be done with the object. Simply return <code>HALT</code>, <code>SKIP</code>, or <code>ALLOW</code> to control the flow for that <code>SourceText</code> object.</p>
<div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">adjust_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adjust the flow of source control objects.&quot;&quot;&quot;</span>

        <span class="n">status</span> <span class="o">=</span> <span class="n">flow_control</span><span class="o">.</span><span class="n">SKIP</span>
        <span class="k">for</span> <span class="n">allow</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">fnmatch</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="n">allow</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">FNMATCH_FLAGS</span><span class="p">):</span>
                <span class="n">status</span> <span class="o">=</span> <span class="n">flow_control</span><span class="o">.</span><span class="n">ALLOW</span>
                <span class="k">for</span> <span class="n">skip</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">skip</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">fnmatch</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="n">skip</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">FNMATCH_FLAGS</span><span class="p">):</span>
                        <span class="n">status</span> <span class="o">=</span> <span class="n">flow_control</span><span class="o">.</span><span class="n">SKIP</span>
                <span class="k">for</span> <span class="n">halt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">halt</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">fnmatch</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="n">halt</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">FNMATCH_FLAGS</span><span class="p">):</span>
                        <span class="n">status</span> <span class="o">=</span> <span class="n">flow_control</span><span class="o">.</span><span class="n">HALT</span>
                <span class="k">if</span> <span class="n">status</span> <span class="o">!=</span> <span class="n">flow_control</span><span class="o">.</span><span class="n">ALLOW</span><span class="p">:</span>
                    <span class="k">break</span>
        <span class="k">return</span> <span class="n">status</span>
</pre></div>

<p>Check out the default flow control plugins provided with the source to see real world examples.</p>
<h3 id="get_plugin_1"><code>get_plugin</code><a class="headerlink" href="#get_plugin_1" title="Permanent link"></a></h3>
<p>And don't forget to provide a function in the file called <code>get_plugin</code>! <code>get_plugin</code> is the entry point and should return your <code>FlowControl</code> object.</p>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_plugin</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Get flow controller.&quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">WildcardFlowControl</span>
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../pipeline/" title="Spelling Pipeline" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Spelling Pipeline
              </span>
            </div>
          </a>
        
        
          <a href="../filters/context/" title="Context" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Context
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017 - 2018 <a href="https://github.com/facelessuser">Isaac Muse</a>
<br><span class="md-footer-custom-text">emoji provided free by <a href="http://www.emojione.com">EmojiOne</a></span>

          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/facelessuser" class="md-footer-social__link fa fa-github"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.9e1f3b71.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
        <script src="../extra-0b9b22dd13.js"></script>
      
    
    
      
    
  </body>
</html>